Go-CqHttp 主动向机器人程序发送数据, 这个行为叫做上报.



## 接收上报

要接收上报数据, 你需要一个能够接收上报的会话, 例如反向 HTTP 会话 `CqRHttpSession` 或正向 WebSocket 会话 `CqWsSession`.

最基础的方法, 也就是从 session 拿到上报管线, 然后在管线中添加一个中间件.

```csharp
// 在上报管线中, 添加自己的中间件
session.PostPipeline.Use(async (context, next) =>
{
    // 判断上报是否是一个群消息上报
    if (context is CqGroupMessagePostContext groupMessagePostContext)
    {
        // 在这个消息所在的群中发送一条消息 "检测到这个群发送了一条消息"
        await session.SendGroupMessageAsync(groupMessagePostContext.GroupId, new CqMessage("检测到这个群发送了一条消息"));
    }
    
    // 这里你可以放任何你想要的逻辑
    
    await next.Invoke();    // 执行下一个中间件
});
```

